(()=>{function a(...b){let c=document.createDocumentFragment();for(let d of b)if(d instanceof Node)c.appendChild(d);else if(d instanceof Array)c.appendChild(a(...d));else if(d instanceof Object){let b;switch(d.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:b=d;break;case Node.COMMENT_NODE:b=document.createComment(d.textContent);break;case Node.TEXT_NODE:b=document.createTextNode(d.textContent);break;default:b=document.createElement(d.tagName);let c=["childNodes","classList","dataset","nodeType","style","tagName","className"],e=Object.keys(d).filter(a=>!c.includes(a));if(d.className&&(b.className=d.className),d.dataset)for(let a in d.dataset)null!==d.dataset[a]&&(b.dataset[a]=d.dataset[a]);if(d.classList&&d.classList.length&&b.classList.add(...d.classList),d.style)for(let a in d.style)b.style.setProperty(a,d.style[a]);if(d.childNodes)for(let c of d.childNodes)b.appendChild(a(c));for(let a of e)a in b?b[a]=d[a]:b.setAttribute(a,d[a]);}c.appendChild(b)}else c.appendChild(document.createTextNode(d));return 1===c.childNodes.length?c.childNodes[0]:c}function b(b){let c=a({tagName:"span",className:"console-value",dataset:{type:b.type}});if(b.id){let d=a({tagName:"span",className:"console-value-label"});c.dataset.subType=b.subType,c.dataset.id=b.id,b.proxy&&(c.dataset.proxy=!0),c.classList.add("console-value-unprocessed","console-value-collapsed"),c.appendChild(d),"function"===b.type?d.appendChild(a([{tagName:"span",className:"console-value-function-prefix",textContent:"\u0192 "},b.functionName])):"value"in b?d.textContent=b.value:d.textContent=b.subType,"Array"===b.subType?(d.appendChild(a({tagName:"span",className:"console-value-details",textContent:"[\u2026]"})),c.appendChild(a({tagName:"span",className:"console-value-details",childNodes:["[",{tagName:"span",className:"console-ellipsis",textContent:"\u2026"},"]"]}))):(d.appendChild(a({tagName:"span",className:"console-value-details",textContent:"{\u2026}"})),c.appendChild(a({tagName:"span",className:"console-value-details",childNodes:["{",{tagName:"span",className:"console-ellipsis",textContent:"\u2026"},"}"]})))}else"string"===b.type?c.appendChild(a([{tagName:"span",textContent:"\""},b.value,{tagName:"span",textContent:"\""}])):c.textContent=b.value;return c}function c(a,b){a.length&&(b.push(a.join("")),a.splice(0))}function d(a,...d){let e,f,g=[],h=[],i=!1,j=0;Array.prototype.forEach.call(a,a=>{var k=Math.floor;"%"!==a||i?i?(i=!1,"%"===a?h.push("%"):"f"===a?(c(h,g),e=d[j++],f=parseFloat(e.value),g.push(f.toString())):"d"===a||"i"===a?(c(h,g),e=d[j++],f=k(e.value),g.push(f.toString())):"o"===a||"O"===a?(c(h,g),g.push(b(d[j++]))):"s"===a?(c(h,g),e=d[j++],"value"in e?g.push(e.value):e.subType?g.push(e.subType):e.functionName?g.push(e.functionName):"function"===e.type?g.push("\u0192()"):g.push(e.type)):void 0):h.push(a):i=!0});for(let c=d.length;j<c;j++)g.push(" "),g.push(b(d[j]));return c(h,g),g}function f(...a){let b=g(...a);return j(b),b}function g(...c){let e={tagName:"div",className:"console-line",childNodes:[{tagName:"div",className:"console-line-header"},{tagName:"div",className:"console-line-content",childNodes:[]}]},f=e.childNodes[1];return"string"===c[0].type&&1===c.length?f.textContent=c[0].value:"string"===c[0].type&&1<c.length&&/((^|[^%])%[sdifoO])/.test(c[0].value)?f.childNodes.push(d(c[0].value,...c.slice(1))):c.forEach((a,c)=>{0<c&&f.childNodes.push(document.createTextNode(" ")),f.childNodes.push(b(a))}),a(e)}function h(c,d){let e=document.querySelectorAll(`.console-value-expanding[data-id="${c}"] > .console-value-details`);for(let f of e)f.parentNode.classList.remove("console-value-expanding","console-value-unprocessed","console-value-collapsed"),f.parentNode.classList.add("console-value-expanded"),f.childNodes[1].replaceWith(a({tagName:"dl",childNodes:d.map(a=>[{tagName:"dt",className:a.id?"console-property-collapsed":null,dataset:{enumerable:!!a.enumerable&&null,proxy:!!a.proxy||null},textContent:a.name},": ",{tagName:"dd",childNodes:[b(a)]},"\n"])}))}function i(a){var b=Math.max;let c,d;for(a=b(1,a);A.children.length>a;)c=A.removeChild(A.firstElementChild),d=[...c.querySelectorAll(".console-value-unprocessed[data-id]")].map(a=>a.dataset.id),o(...d);if(F.closest(".snippet-console")||(F=A),1==a){let a=g({type:"string",value:"Console was cleared"});a.classList.add("console-line-feedback"),A.insertBefore(a,A.firstElementChild)}}function j(a){F===A?A.insertBefore(a,A.lastElementChild):F.appendChild(a),i(z),A.lastElementChild.scrollIntoView(!1)}function k(...b){let c=1,d=F;for(;d.classList.contains("console-group");)c++,d=d.parentNode;let e=a({tagName:"div",className:"console-group",style:{"--depth":c},childNodes:[g(...b)]});return e.children[0].classList.add("console-line-group"),j(e),F=e,F}function l(){F!==A&&(F=F.parentNode)}function m(a){B.contentWindow.postMessage(`${y}${JSON.stringify(a)}`,"*")}function n(a,b){m({command:"get-object-properties",args:[a,b]})}function o(...a){m({command:"remove-cached-objects",args:a})}function p(){localStorage.setItem("console-input-history",JSON.stringify(D))}function q(a){D[D.length-1]!==a&&(D.push(a),10<D.length&&D.shift(),p()),E=D.length-1}function r(a){a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation()}function s(a){a.style.height="100%",a.clientHeight<a.scrollHeight&&(a.style.height=a.scrollHeight+"px")}function t(a){if(a.selectionStart===a.selectionEnd){let b=a.value.indexOf("\n");return-1===b||a.selectionStart<=b}}function u(a){if(a.selectionStart===a.selectionEnd){let b=a.value.lastIndexOf("\n");return-1===b||a.selectionStart>b||a.selectionStart===a.value.length-1}}function v(a){if(!a.shiftKey){let b=a.target,c=b.value;q(c);let d=f({type:"string",value:c});d.classList.add("console-line-echo"),m({command:"eval",args:c}),b.value="",b.style.height="100%",r(a)}}function w(a){if(!a.shiftKey){let b=a.target;t(b)&&(0>E&&(E=D.length-1),b.value=D[E--]||"",s(b),b.scrollIntoView(),r(a))}}function x(a){if(!a.shiftKey){let b=a.target;u(b)&&(E>D.length&&(E=D.length-1),b.value=D[E++]||"",s(b),b.scrollIntoView(),r(a))}}const y="SNIPPETCONSOLE:",z=25,A=document.querySelector(".snippet-console"),B=document.querySelector("iframe"),C=document.getElementById("console-input"),D=JSON.parse(localStorage.getItem("console-input-history")||"[]");let E=-1,F=A;window.addEventListener("message",function(a){if(a.data&&a.data.startsWith(y)){a.preventDefault(),a.stopImmediatePropagation(),a.stopPropagation();let b=JSON.parse(a.data.slice(y.length));switch(b.command){case"console-group":k(...b.args);break;case"console-group-collapsed":k(...b.args).classList.add("console-group-collapsed");break;case"console-group-end":l();break;case"console-clear":i(0);break;case"console-error":f(...b.args).classList.add("console-line-error");break;case"console-warn":f(...b.args).classList.add("console-line-warn");break;case"console-log":case"console-dir":case"console-info":f(...b.args);break;case"eval-result":f(b.args).classList.add("console-line-return");break;case"process-object-properties":h(...b.args);}}}),document.addEventListener("click",function(a){if(a.target.matches(".console-line-group, .console-line-group > .console-line-header, .console-line-group > .console-line-content")){let b=a.target.closest(".console-line-group");b.parentNode.classList.contains("console-group-collapsed")?b.parentNode.classList.remove("console-group-collapsed"):b.parentNode.classList.add("console-group-collapsed")}}),document.addEventListener("click",function(a){let b,c=a.target.closest(".console-value-label");if(null===c){let c=a.target.closest(".console-property-expanded,.console-property-collapsed");if(null===c)return;b=c.nextElementSibling.firstElementChild}else b=a.target.closest(".console-value");if(b&&b.dataset.id){b.classList.contains("console-value-unprocessed")?(n(b.dataset.id,"true"===b.dataset.proxy),b.classList.add("console-value-expanding")):b.classList.contains("console-value-expanded")?(b.classList.remove("console-value-expanded"),b.classList.add("console-value-collapsed")):(b.classList.remove("console-value-collapsed"),b.classList.add("console-value-expanded"));let a=b.closest("dd");if(a){let b=a.previousElementSibling;b&&(b.classList.contains("console-property-expanded")?(b.classList.remove("console-property-expanded"),b.classList.add("console-property-collaped")):(b.classList.remove("console-property-collaped"),b.classList.add("console-property-expanded")))}}}),C.addEventListener("input",function(a){s(a.target)}),C.addEventListener("keydown",function(a){switch(a.which){case 13:v(a);break;case 38:w(a);break;case 104:w(a);break;case 40:x(a);break;case 98:x(a);}});let G=document.forms[0];G.submit(),G.parentNode.removeChild(G)})();