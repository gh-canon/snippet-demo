(()=>{function a(){try{localStorage.setItem("console-input-history",JSON.stringify(D))}catch(a){// :(
}}function b(...a){let c=document.createDocumentFragment();for(let d of a)if(d instanceof Node)c.appendChild(d);else if(d instanceof Array)c.appendChild(b(...d));else if(d instanceof Object){let a;switch(d.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:a=d;break;case Node.COMMENT_NODE:a=document.createComment(d.textContent);break;case Node.TEXT_NODE:a=document.createTextNode(d.textContent);break;default:a=document.createElement(d.tagName);let c=["childNodes","classList","dataset","nodeType","style","tagName","className"],e=Object.keys(d).filter(a=>!c.includes(a));if(d.className&&(a.className=d.className),d.dataset)for(let b in d.dataset)null!==d.dataset[b]&&(a.dataset[b]=d.dataset[b]);if(d.classList&&d.classList.length&&a.classList.add(...d.classList),d.style)for(let b in d.style)a.style.setProperty(b,d.style[b]);if(d.childNodes)for(let c of d.childNodes)a.appendChild(b(c));for(let b of e)b in a?a[b]=d[b]:a.setAttribute(b,d[b]);}c.appendChild(a)}else c.appendChild(document.createTextNode(d));return 1===c.childNodes.length?c.childNodes[0]:c}function c(a){let c=b({tagName:"span",className:"console-value",dataset:{type:a.type}});if(a.id){let d=b({tagName:"span",className:"console-value-label"});c.dataset.subType=a.subType,c.dataset.id=a.id,a.proxy&&(c.dataset.proxy=!0),c.classList.add("console-value-unprocessed","console-value-collapsed"),c.appendChild(d),"function"===a.type?d.appendChild(b([{tagName:"span",className:"console-value-function-prefix",textContent:"\u0192 "},a.functionName])):"value"in a?d.textContent=a.value:d.textContent=a.subType,"Array"===a.subType?(d.appendChild(b({tagName:"span",className:"console-value-details",textContent:"[\u2026]"})),c.appendChild(b({tagName:"span",className:"console-value-details",childNodes:["[",{tagName:"span",className:"console-ellipsis",textContent:"\u2026"},"]"]}))):(d.appendChild(b({tagName:"span",className:"console-value-details",textContent:"{\u2026}"})),c.appendChild(b({tagName:"span",className:"console-value-details",childNodes:["{",{tagName:"span",className:"console-ellipsis",textContent:"\u2026"},"}"]})))}else"string"===a.type?c.appendChild(b([{tagName:"span",textContent:"\""},a.value,{tagName:"span",textContent:"\""}])):c.textContent=a.value;return c}function d(a,b){a.length&&(b.push(a.join("")),a.splice(0))}function e(a,...b){let e,f,g=[],h=[],i=!1,j=0;Array.prototype.forEach.call(a,a=>{var k=Math.floor;"%"!==a||i?i?(i=!1,"%"===a?h.push("%"):"f"===a?(d(h,g),e=b[j++],f=parseFloat(e.value),g.push(f.toString())):"d"===a||"i"===a?(d(h,g),e=b[j++],f=k(e.value),g.push(f.toString())):"o"===a||"O"===a?(d(h,g),g.push(c(b[j++]))):"s"===a?(d(h,g),e=b[j++],"value"in e?g.push(e.value):e.subType?g.push(e.subType):e.functionName?g.push(e.functionName):"function"===e.type?g.push("\u0192()"):g.push(e.type)):void 0):h.push(a):i=!0});for(let d=b.length;j<d;j++)g.push(" "),g.push(c(b[j]));return d(h,g),g}function f(...a){let b=g(...a);return k(b),b}function g(...a){let d={tagName:"div",className:"console-line",childNodes:[{tagName:"div",className:"console-line-header"},{tagName:"div",className:"console-line-content",childNodes:[]}]},f=d.childNodes[1];return"string"===a[0].type&&1===a.length?f.textContent=a[0].value:"string"===a[0].type&&1<a.length&&/((^|[^%])%[sdifoO])/.test(a[0].value)?f.childNodes.push(e(a[0].value,...a.slice(1))):a.forEach((a,b)=>{0<b&&f.childNodes.push(document.createTextNode(" ")),f.childNodes.push(c(a))}),b(d)}function h(a,d){let e=document.querySelectorAll(`.console-value-expanding[data-id="${a}"] > .console-value-details`);for(let f of e)f.parentNode.classList.remove("console-value-expanding","console-value-unprocessed","console-value-collapsed"),f.parentNode.classList.add("console-value-expanded"),f.childNodes[1].replaceWith(b({tagName:"dl",childNodes:d.map(a=>[{tagName:"dt",className:a.id?"console-property-collapsed":null,dataset:{enumerable:!!a.enumerable&&null,proxy:!!a.proxy||null},textContent:a.name},": ",{tagName:"dd",childNodes:[c(a)]},"\n"])}))}function i(){A.scrollTop=A.lastElementChild.offsetTop}function j(a){var b=Math.max;let c,d;for(a=b(1,a);A.children.length>a;)c=A.removeChild(A.firstElementChild),d=[...c.querySelectorAll(".console-value-unprocessed[data-id]")].map(a=>a.dataset.id),p(...d);if(F.closest(".snippet-console")||(F=A),1==a){let a=g({type:"string",value:"Console was cleared"});a.classList.add("console-line-feedback"),A.insertBefore(a,A.firstElementChild)}}function k(a){F===A?A.insertBefore(a,A.lastElementChild):F.appendChild(a),j(z),i()}function l(...a){let c=1,d=F;for(;d.classList.contains("console-group");)c++,d=d.parentNode;let e=b({tagName:"div",className:"console-group",style:{"--depth":c},childNodes:[g(...a)]});return e.children[0].classList.add("console-line-group"),k(e),F=e,F}function m(){F!==A&&(F=F.parentNode)}function n(a){B.contentWindow.postMessage(`${y}${JSON.stringify(a)}`,"*")}function o(a,b){n({command:"get-object-properties",args:[a,b]})}function p(...a){n({command:"remove-cached-objects",args:a})}function q(b){D[D.length-1]!==b&&(D.push(b),10<D.length&&D.shift(),a()),E=D.length-1}function r(a){a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation()}function s(a){a.style.height="100%",a.clientHeight<a.scrollHeight&&(a.style.height=a.scrollHeight+"px")}function t(a){if(a.selectionStart===a.selectionEnd){let b=a.value.indexOf("\n");return-1===b||a.selectionStart<=b}}function u(a){if(a.selectionStart===a.selectionEnd){let b=a.value.lastIndexOf("\n");return-1===b||a.selectionStart>b||a.selectionStart===a.value.length-1}}function v(a){if(!a.shiftKey){let b=a.target,c=b.value;q(c);let d=f({type:"string",value:c});d.classList.add("console-line-echo"),n({command:"eval",args:c}),b.value="",b.style.height="100%",r(a)}}function w(a){if(!a.shiftKey){let b=a.target;t(b)&&(0>E&&(E=D.length-1),b.value=D[E--]||"",s(b),i(),r(a))}}function x(a){if(!a.shiftKey){let b=a.target;u(b)&&(E>D.length&&(E=D.length-1),b.value=D[E++]||"",s(b),i(),r(a))}}const y="SNIPPETCONSOLE:",z=25,A=document.querySelector(".snippet-console"),B=document.querySelector("iframe"),C=document.getElementById("console-input"),D=function(){try{let a=localStorage.getItem("console-input-history");return JSON.parse(a)}catch(a){return[]}}();let E=-1,F=A;window.addEventListener("message",function(a){if(a.data&&a.data.startsWith(y)){a.preventDefault(),a.stopImmediatePropagation(),a.stopPropagation();let b=JSON.parse(a.data.slice(y.length));switch(b.command){case"console-group":l(...b.args);break;case"console-group-collapsed":l(...b.args).classList.add("console-group-collapsed");break;case"console-group-end":m();break;case"console-clear":j(0);break;case"console-error":f(...b.args).classList.add("console-line-error");break;case"console-warn":f(...b.args).classList.add("console-line-warn");break;case"console-log":case"console-dir":case"console-info":f(...b.args);break;case"eval-result":f(b.args).classList.add("console-line-return");break;case"process-object-properties":h(...b.args);}}}),document.addEventListener("click",function(a){if(a.target.matches(".console-line-group, .console-line-group > .console-line-header, .console-line-group > .console-line-content")){let b=a.target.closest(".console-line-group");b.parentNode.classList.contains("console-group-collapsed")?b.parentNode.classList.remove("console-group-collapsed"):b.parentNode.classList.add("console-group-collapsed")}}),document.addEventListener("click",function(a){let b,c=a.target.closest(".console-value-label");if(null===c){let c=a.target.closest(".console-property-expanded,.console-property-collapsed");if(null===c)return;b=c.nextElementSibling.firstElementChild}else b=a.target.closest(".console-value");if(b&&b.dataset.id){b.classList.contains("console-value-unprocessed")?(o(b.dataset.id,"true"===b.dataset.proxy),b.classList.add("console-value-expanding")):b.classList.contains("console-value-expanded")?(b.classList.remove("console-value-expanded"),b.classList.add("console-value-collapsed")):(b.classList.remove("console-value-collapsed"),b.classList.add("console-value-expanded"));let a=b.closest("dd");if(a){let b=a.previousElementSibling;b&&(b.classList.contains("console-property-expanded")?(b.classList.remove("console-property-expanded"),b.classList.add("console-property-collaped")):(b.classList.remove("console-property-collaped"),b.classList.add("console-property-expanded")))}}}),C.addEventListener("input",function(a){s(a.target)}),C.addEventListener("keydown",function(a){switch(a.which){case 13:v(a);break;case 38:w(a);break;case 104:w(a);break;case 40:x(a);break;case 98:x(a);}});let G=document.forms[0];G.submit(),G.parentNode.removeChild(G)})();